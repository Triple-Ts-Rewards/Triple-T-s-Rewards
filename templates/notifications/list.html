{% extends "base.html" %}

{% block title %}My Notifications - TRIPLE T's Trucking Rewards{% endblock %}

{% block content %}
  <div class="page-header">
    <h1>Notifications</h1>
    <p class="text-muted" style="margin:0;">Catch up on the latest messages from your organization.</p>
  </div>

  <div class="card-elevated" style="margin-bottom:1.5rem;">
    <div class="card-header-accent">
      <h2>Quick Actions</h2>
    </div>
    <div class="org-card-body">
      <div class="dashboard-actions" style="max-width:320px;">
        <a href="{{ url_for('notification_bp.send_message') }}" class="btn btn-primary">New Message</a>
      </div>
    </div>
  </div>

  {% if notifications %}
    <div class="card-elevated">
      <div class="card-header-accent">
        <h2>Inbox</h2>
      </div>
      <div class="org-card-body" style="display:flex; flex-direction:column; gap:1rem;">
        {% for notification in notifications %}
          <div class="notification-item card-elevated" style="padding:1.25rem; border:1px solid var(--border); box-shadow:none;">
            <div style="display:flex; justify-content:space-between; flex-wrap:wrap; gap:0.75rem;">
              <div class="sender">
                <span class="text-muted">From</span>
                <strong>
                  {% if notification.sender %}
                    {{ notification.sender.USERNAME }}
                  {% else %}
                    System/Unknown
                  {% endif %}
                </strong>
              </div>
              <span class="timestamp text-muted">
                {{ notification.TIMESTAMP.strftime('%b %d, %Y â€¢ %I:%M %p') }}
              </span>
            </div>
            <p class="message" style="margin:0.75rem 0 0;">{{ notification.MESSAGE }}</p>
            {% if not notification.READ_STATUS %}
              <span class="badge-small" style="margin-top:0.75rem;">Unread</span>
            {% endif %}
          </div>
        {% endfor %}
      </div>
    </div>
  {% else %}
    <div class="empty-state">
      <div class="empty-state-icon">ðŸ“­</div>
      <p class="empty-state-heading">You currently have no notifications.</p>
      <p class="text-muted">Keep up the great work to earn points and rewards! ðŸšš</p>
    </div>
  {% endif %}
{% endblock %}

{% block styles %}{% endblock %}