{% extends "base.html" %}
{% block content %}
  <div class="page-header">
    <h1>Create Driver Account</h1>
    <p class="text-muted" style="margin:0;">Complete the form to join Triple Tâ€™s rewards program.</p>
  </div>

  <div class="card-elevated">
    <div class="card-header-accent">
      <h2>Registration Details</h2>
    </div>
    <div class="org-card-body">
      <form method="POST" action="{{ url_for('driver_bp.register_driver') }}" style="display:grid; gap:1.5rem;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="flash-messages">
              {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        <section>
          <h3>Account Credentials</h3>
          <div class="form-group">
            <label for="username">Username</label>
            <input id="username" type="text" name="username" class="input" required>
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input id="password" type="password" name="password" class="input" required>
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input id="email" type="email" name="email" class="input" required>
          </div>
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input id="phone" type="tel" name="phone" class="input" placeholder="(555) 555-5555" required>
          </div>
        </section>

        <section>
          <h3>Personal & Driver Details</h3>
          <div style="display:grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); gap:1rem;">
            <div class="form-group">
              <label for="fname">First Name</label>
              <input id="fname" type="text" name="fname" class="input" required>
            </div>
            <div class="form-group">
              <label for="lname">Last Name</label>
              <input id="lname" type="text" name="lname" class="input" required>
            </div>
          </div>
          <div class="form-group">
            <label for="license_number">Driver License Number</label>
            <input id="license_number" type="text" name="license_number" class="input" required>
          </div>
        </section>

        <section>
          <h3>Primary Address</h3>
          <div class="form-group">
            <label for="street">Street Address</label>
            <input id="street" type="text" name="street" class="input" required>
          </div>
          <div style="display:grid; grid-template-columns: 2fr 1fr 1fr; gap:1rem;">
            <div class="form-group">
              <label for="city">City</label>
              <input id="city" type="text" name="city" class="input" required>
            </div>
            <div class="form-group">
              <label for="state">State</label>
              <input id="state" type="text" name="state" class="input" required>
            </div>
            <div class="form-group">
              <label for="zip_code">Zip Code</label>
              <input id="zip_code" type="text" name="zip_code" class="input" required>
            </div>
          </div>
        </section>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Register Account</button>
        </div>
      </form>
      <div class="form-actions" style="margin-top:1rem;">
        <a href="{{ url_for('driver_bp.login') }}" class="btn btn-outline">Already have an account? Log In</a>
      </div>
    </div>
  </div>
{% endblock %}