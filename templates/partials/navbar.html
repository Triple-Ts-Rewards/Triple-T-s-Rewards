<nav class="site-nav">
  <div class="nav-left">

    <a class="nav-link {{ 'active' if request.endpoint == 'common.index' else '' }}"
       href="{{ url_for('common.index') }}">Home</a>

    <a class="nav-link {{ 'active' if request.endpoint == 'driver_bp.dashboard' else '' }}"
       href="{{ url_for('driver_bp.dashboard') }}">Driver Dashboard</a>

    <a class="nav-link {{ 'active' if request.endpoint == 'sponsor_bp.dashboard' else '' }}"
       href="{{ url_for('sponsor_bp.dashboard') }}">Sponsor Dashboard</a>

    <a class="nav-link"
       href="{{ url_for('rewards_bp.store') }}">Truck Rewards Store</a>

    <a class="nav-link {{ 'active' if request.endpoint == 'about_bp.view_about' else '' }}"
       href="{{ url_for('about_bp.view_about') }}">About</a>
    <a class="nav-link {{ 'active' if request.endpoint == 'notification_bp.send_message' else '' }}"
       href="{{ url_for('notification_bp.send_message') }}">Send Message</a>
  </div>

  <div class="nav-right">
    {% if current_user.is_authenticated %}
    <button id="theme-toggle" class="nav-link btn-icon" aria-label="Toggle Theme">
      <!-- Sun icon (light mode) -->
      <svg id="icon-sun" xmlns="http://www.w3.org/2000/svg" 
       class="icon icon-tabler icon-tabler-sun" 
           viewBox="0 0 24 24" stroke-width="2" 
           stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="4" />
        <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
      </svg>

      <!-- Moon icon (dark mode) -->
      <svg id="icon-moon" xmlns="http://www.w3.org/2000/svg" 
          class="icon icon-tabler icon-tabler-moon" 
          viewBox="0 0 24 24" stroke-width="2" 
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
      </svg>
  </button>

      <a href="{{ url_for('rewards_bp.view_cart') }}" class="nav-link">
        Cart <span id="cart-item-count"></span>
      </a>
      <a href="{{ url_for('rewards_bp.view_wishlist') }}" class="nav-link">
        Wishlist
      </a>
      <span id="notification-bell-container" style="position: relative; margin-left: 10px; display: inline-block;">
        <a href="{{ url_for('notification_bp.notifications') }}" style="text-decoration: none; font-size: 1.5em; vertical-align: middle;">
          ðŸ””
        </a>
        <span id="notification-count" 
              style="position: absolute; top: -8px; right: -12px; 
                     background-color: red; color: white; border-radius: 50%; 
                     padding: 2px 6px; font-size: 0.7em; 
                     line-height: 1; /* Ensures text is centered */
                     display: none; /* Hidden by default */
                     min-width: 10px; /* Ensures bubble holds one digit */
                     text-align: center;">
        </span>
      </span>
      <span class="user-chip">Hi, {{ current_user.USERNAME }}</span>
      <a class="btn-outline" href="{{ url_for('auth.logout') }}">Logout</a>
    {% else %}
      <a class="btn-primary" href="{{ url_for('auth.login') }}">Login</a>
    {% endif %}
  </div>
</nav>
<!-- templates/partials/navbar.html  (new file) -->